(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{561:function(t,e,o){"use strict";o.r(e);var n=o(32),l=(o(92),o(14),o(5),o(25),o(77),{props:["documentos","new","update","create"],data:function(){return{dialog:!1,file:new File([""],"xxxxx.docx"),files:[],itemFiles:[],formData:{},formDataBinary:new FormData}},computed:{localFiles:{get:function(){return this.documentos},set:function(t){this.$emit("update:documentos",t)}}},created:function(){var t;(this.localFiles=[],console.log(this.documentos),this.update)&&((null===(t=this.documentos)||void 0===t?void 0:t.length)>0&&(this.localFiles=this.documentos));console.log(this.localFiles),this.getListDocumentsType()},methods:{getHintByFile:function(data){var t,e="";this.localFiles.length>0&&(e=null===(t=this.localFiles)||void 0===t?void 0:t.filter((function(t){return t.nombre.split(".")[0]===data.codigo})));return e.length>0?"Ya existe este archivo, clic para actualizarlo":""},getFileObject:function(t,e){var o=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t;case 2:o.localFiles=n.sent,o.formDataBinary.delete(""+e.codigo),t&&o.formDataBinary.append(""+e.codigo,t),console.log(t),console.log(o.formData);case 7:case"end":return n.stop()}}),n)})))()},getListDocumentsType:function(){var t=this;this.$axios.get("/lista_tipos_documentos/all").then((function(e){var o;t.itemFiles=null==e||null===(o=e.data)||void 0===o?void 0:o.data})).catch((function(t){console.log(t)}))},saveFiles:function(){var t=this;console.log(this.file),this.formDataBinary.delete("data"),this.formDataBinary.delete("client_id"),this.formDataBinary.append("data",JSON.stringify(this.itemFiles)),this.formDataBinary.append("client_id",this.$route.params.id),this.$axios.setHeader("Content-Type","multipart/form-data"),this.$axios.post("/documentos/save",this.formDataBinary).then((function(t){var e;console.log(null==t||null===(e=t.data)||void 0===e?void 0:e.data)})).catch((function(t){})).finally((function(){t.dialog=!1}))}}}),r=o(63),c=o(76),d=o.n(c),v=o(236),f=o(472),m=o(471),h=o(499),F=o(505),_=o(559),x=o(204),y=o(500),w=o(468),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-row",[o("v-col",{staticClass:"d-flex justify-end",attrs:{cols:"12"}},[o("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.dialog=!0}}},[t._v("\n        AÃ±adir\n        "),o("v-icon",[t._v("mdi-plus")])],1)],1)],1),t._v(" "),o("v-row",t._l(t.localFiles,(function(e,i){return o("v-col",{key:i,attrs:{cols:"12",md:"6",sm:"12"}},[o("span",[o("a",{attrs:{href:e.s3urlpresigned,target:"_blank"}},[t._v(t._s(e.nombre))])])])})),1),t._v(" "),o("v-dialog",{attrs:{"max-width":"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",{staticClass:"pb-10"},[t._v("Documentos")]),t._v(" "),o("v-card-text",[o("v-row",{staticClass:"ma-5"},t._l(t.itemFiles,(function(e,i){return o("v-col",{key:i,attrs:{cols:"12",md:"6",sm:"12"}},[o("v-file-input",{ref:e.codigo,refInFor:!0,attrs:{clearable:!1,"show-size":"",id:e.codigo,label:e.nombre,outlined:"",dense:"",hint:t.getHintByFile(e),"persistent-hint":"",accept:"image/*,.pdf,.doc,.docx"},on:{change:function(o){return t.getFileObject(o,e)}}})],1)})),1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Cancelar\n        ")]),t._v(" "),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.saveFiles()}}},[t._v("\n          Agregar\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;d()(component,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardText:m.c,VCardTitle:m.d,VCol:h.a,VDialog:F.a,VFileInput:_.a,VIcon:x.a,VRow:y.a,VSpacer:w.a})}}]);